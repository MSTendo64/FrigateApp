<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:FrigateApp.ViewModels"
             xmlns:controls="using:FrigateApp.Controls"
             xmlns:conv="using:Avalonia.Data.Converters"
             x:Class="FrigateApp.Views.ClipPlayerView"
             x:DataType="vm:ClipPlayerViewModel">

    <Grid RowDefinitions="Auto,*,Auto">
        <Border Grid.Row="0" Background="#1a1a1a" Padding="12,8" BorderBrush="#333" BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="Auto,*">
                <Button Content="← Назад" Command="{Binding BackCommand}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <TextBlock Grid.Column="1" Text="{Binding Title}" FontWeight="SemiBold" VerticalAlignment="Center"/>
            </Grid>
        </Border>
        <Grid Grid.Row="1" Background="Black">
            <controls:CameraPlayer x:Name="Player"/>
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" IsVisible="{Binding ShowFallbackMessage}" Spacing="8">
                <TextBlock Text="Воспроизведение в приложении недоступно (например, на Linux без LibVLC)." TextWrapping="Wrap" Foreground="#aaa" TextAlignment="Center"/>
                <TextBlock Text="{Binding ErrorText}" Foreground="Orange" TextAlignment="Center" IsVisible="{Binding ErrorText, Converter={x:Static conv:StringConverters.IsNotNullOrEmpty}}"/>
            </StackPanel>
        </Grid>
        <Border Grid.Row="2" Background="#1a1a1a" Padding="12,8" BorderBrush="#333" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="16">
                <Button x:Name="BtnBack10" Content="−10 с" Width="60" ToolTip.Tip="Назад 10 сек"/>
                <Button x:Name="BtnPlayPause" Content="▶" Width="44" ToolTip.Tip="Пауза / Воспроизведение"/>
                <Button x:Name="BtnFwd10" Content="+10 с" Width="60" ToolTip.Tip="Вперёд 10 сек"/>
                <ComboBox x:Name="SpeedCombo" MinWidth="70" SelectedIndex="1" ToolTip.Tip="Скорость воспроизведения">
                    <ComboBoxItem Content="0.5×"/>
                    <ComboBoxItem Content="1×"/>
                    <ComboBoxItem Content="1.5×"/>
                    <ComboBoxItem Content="2×"/>
                </ComboBox>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
