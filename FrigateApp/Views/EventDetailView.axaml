<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:FrigateApp.ViewModels"
             xmlns:conv="using:Avalonia.Data.Converters"
             xmlns:localconv="using:FrigateApp.Converters"
             x:Class="FrigateApp.Views.EventDetailView"
             x:DataType="vm:EventDetailViewModel">

    <Grid RowDefinitions="Auto,*">
        <Border Grid.Row="0" Background="#1a1a1a" Padding="12,8" BorderBrush="#333" BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="Auto,*">
                <Button Content="← Назад" Command="{Binding BackCommand}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <TextBlock Text="{Binding Label}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding Camera}" Foreground="#888" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding StartTimeText}" Foreground="#888" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding DurationText}" Foreground="#888" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding ErrorText}" Foreground="Orange" IsVisible="{Binding ErrorText, Converter={x:Static conv:StringConverters.IsNotNullOrEmpty}}" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1" Margin="12">
            <ProgressBar IsIndeterminate="True" IsVisible="{Binding IsLoading}" Height="4" VerticalAlignment="Top"/>
            <StackPanel Spacing="12" IsVisible="{Binding IsContentVisible}">
                <Image Source="{Binding Snapshot, Converter={x:Static localconv:NullToPlaceholderBitmapConverter.Instance}}" MaxHeight="400" Stretch="Uniform"/>
                <StackPanel Orientation="Horizontal" Spacing="8" IsVisible="{Binding HasClip}">
                    <Button Content="Смотреть в приложении" Command="{Binding OpenClipInAppCommand}"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
