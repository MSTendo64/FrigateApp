<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:FrigateApp.ViewModels"
             xmlns:controls="using:FrigateApp.Controls"
             xmlns:conv="using:Avalonia.Data.Converters"
             x:Class="FrigateApp.Views.ProfessionalCameraPlayerView"
             x:DataType="vm:ProfessionalCameraPlayerViewModel"
             x:CompileBindings="True">

    <Grid Background="#0d0d0d">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Верхняя панель с названием и кнопкой назад -->
        <Border Grid.Row="0" Background="#1a1a1a" Padding="12,8" BorderBrush="#333" BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="Auto,*">
                <Button Content="← Назад" 
                        Command="{Binding BackCommand}" 
                        VerticalAlignment="Center"
                        Padding="12,6"
                        FontSize="13"/>
                <TextBlock Grid.Column="1" 
                           Text="{Binding DisplayName}" 
                           FontWeight="SemiBold" 
                           FontSize="16"
                           Foreground="White"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Видео -->
        <Grid Grid.Row="1" Background="#000">
            <!-- Плеер -->
            <controls:CameraPlayer x:Name="Player" 
                                   HorizontalAlignment="Stretch" 
                                   VerticalAlignment="Stretch"
                                   StretchToFill="True"/>

            <!-- Индикатор загрузки -->
            <StackPanel HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        IsVisible="{Binding IsLoading}" 
                        Spacing="12">
                <ProgressBar IsIndeterminate="True" Width="200" Height="4"/>
                <TextBlock Text="{Binding StatusText}" 
                           Foreground="White" 
                           HorizontalAlignment="Center"
                           FontSize="14"/>
            </StackPanel>

            <!-- Индикатор ошибки -->
            <StackPanel HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        IsVisible="{Binding HasError}" 
                        Spacing="12">
                <TextBlock Text="⚠️" FontSize="48" HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding ErrorText}" 
                           Foreground="#ff6b6b" 
                           HorizontalAlignment="Center"
                           TextWrapping="Wrap" 
                           MaxWidth="400"
                           FontSize="14"
                           TextAlignment="Center"/>
                <Button Content="Повторить" 
                        Command="{Binding BackCommand}"
                        Padding="16,8"
                        Margin="0,8,0,0"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
